webpackJsonp([1],{"3hvS":function(t,e){},LV7X:function(t,e){},LuKX:function(t,e){},Lxn6:function(t,e){window.$myUtil={encrypto:function(t,e){return CryptoJS.AES.encrypt(t,e).toString()},decrypto:function(t,e){return CryptoJS.AES.decrypt(t,e).toString(CryptoJS.enc.Utf8)},encodePassword:function(t){var e=window.$myConfig.PWD_CRYPTO_SALT;return this.encrypto(t,e)},compact:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};for(var a in t)t[a]&&(e[a]=t[a]);return e}}},MTyt:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App",data:function(){return{}},methods:{},created:function(){}},i,!1,function(t){a("z2mf")},null,null).exports,n=a("/ocq");var l={name:"Login",data:function(){return{form:{name:"",pwd:"",code:""},codeImageHtml:"",codeImageKey:"",isLoginFormValid:!1,formValidStatus:{},formPropKeys:["name","pwd","code"],isAutoComplete:!1,rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名不少于3个字符",trigger:"blur"},{max:20,message:"用户名不多于20个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,message:"密码名不少于3个字符",trigger:"blur"},{max:20,message:"密码名不多于20个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:["blur","change"]}]}}},methods:{changeCodeImage:function(){this.codeImageKey="",this.resetForm("code"),this.getLoginCode()},getLoginCode:function(){var t=this;window.$cmsApi.getLoginCode({width:100,height:30},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.codeImageHtml=e.img,t.codeImageKey=e.key||""},function(){t.$message({showClose:!0,message:"验证码请求出错",type:"error"})})},validWholeForm:function(t){var e=this,a=!0;this.formPropKeys.forEach(function(t,s){a&&(a=!!e.formValidStatus[t])}),this.isLoginFormValid=a},validateListener:function(t,e){this.formValidStatus[t]=e,console.log(t,e),this.validWholeForm()},submitForm:function(){if(!this.isLoginFormValid)return window.$myCommon.toast("请检查参数是否正确"),!1;var t=this.form||{};this._login(t.name,t.pwd,t.code,this.codeImageKey)},_login:function(t,e,a,s){var i=this,o=window.$myConfig.RES_COMMON_CODES,n=-2,l=-3;window.$cmsApi.login({username:t,pwd:e,code:a,codekey:s},function(t){i.isAutoComplete=!1;var e=t.code;1==e?(i.$router.push({name:"adminApp"}),window.localStorage.setItem("cms_username",i.form.name),window.localStorage.setItem("cms_pwd",i.form.pwd)):(window.$myCommon.toast(t.msg||"登录失败"),e==o.userNotFound||e==o.userIsBan?(i.resetForm(),i.changeCodeImage()):e==n?(i.resetForm("pwd"),i.changeCodeImage()):e==l&&i.changeCodeImage())},function(t){i.isAutoComplete=!1,window.$myCommon.toast(t||"网络失败，请稍后再试")})},resetForm:function(t){t?this.$refs["loginForm_"+t].resetField():this.$refs.loginForm.resetFields()}},mounted:function(){var t=this;this.getLoginCode(),window.$myCommon.checkLogin(function(t){},function(){var e=window.localStorage.getItem("cms_username"),a=window.localStorage.getItem("cms_pwd");e&&a&&(t.form.name=e,t.form.pwd=a,t.isAutoComplete=!0,t.formValidStatus.name=!0,t.formValidStatus.pwd=!0)})}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-login flex-center"},[a("div",{staticClass:"login-wrap"},[a("el-form",{ref:"loginForm",attrs:{model:t.form,rules:t.rules,"label-width":"60px"},on:{validate:t.validateListener}},[a("el-form-item",{attrs:{label:"用户名",placeholder:"请输入用户名",prop:"name"}},[a("el-input",{class:{"auto-complete":t.isAutoComplete},attrs:{maxlength:"20",clearable:""},on:{input:function(e){t.isAutoComplete=!1}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{ref:"loginForm_pwd",attrs:{label:"密码",placeholder:"请输入密码",prop:"pwd"}},[a("el-input",{class:{"auto-complete":t.isAutoComplete},attrs:{type:"password",maxlength:"20",clearable:"","auto-complete":"on"},on:{input:function(e){t.isAutoComplete=!1}},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1),t._v(" "),a("el-form-item",{ref:"loginForm_code",attrs:{label:"验证码",placeholder:"请输入验证码",prop:"code"}},[a("el-col",{attrs:{span:13}},[a("el-input",{attrs:{"auto-complete":"on"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),a("el-col",{staticClass:"code-col"},[a("div",{staticClass:"code-wrap",domProps:{innerHTML:t._s(t.codeImageHtml)},on:{click:t.changeCodeImage}})])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"40px"}},[a("el-button",{staticClass:"btn-login",attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("登  录")])],1)],1)],1),t._v(" "),a("div",{staticClass:"copyright"},[t._v("Copyright © 2018")])])},staticRenderFns:[]};var p=a("VU/8")(l,r,!1,function(t){a("s8Av")},"data-v-1a6595e6",null).exports,c={name:"Cat2",data:function(){return{state:$store.state,isCollapse:!1,asideWidth:220}},watch:{isCollapse:function(t,e){this.asideWidth=t?64:220}},methods:{toggleAsideCollapse:function(){this.isCollapse=!this.isCollapse},logout:function(){var t=this;window.$cmsApi.logout(function(){t.$router.push({name:"login"})},function(){window.$myCommon.toast("退出失败")})},getAllDevUserList:function(){window.$cmsApi.getAllDevUserList(function(t){var e=t.data||[],a=window.$store.state.GroupMaps,s=_.filter(e,{GroupId:a.develop.id})||[],i=_.filter(e,{GroupId:a.custom.id})||[],o=_.filter(e,{GroupId:a.manager.id})||[];window.$store.state.devUserList=_.concat(s,o),window.$store.state.custUserList=_.concat(i,o),window.$store.state.allUserList=e},function(){})}},mounted:function(){var t=this;window.$myCommon.checkLogin(function(e){window.$store.state;t.getAllDevUserList(),t.$router.push({name:"appList"})},function(){},!0)}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"main-container"},[a("el-aside",{staticClass:"main-aside",attrs:{width:t.asideWidth+"px"}},[a("el-menu",{staticClass:"aside-menus",attrs:{"default-active":"1-1","default-openeds":["1","2","3","4","5","6"],"unique-opened":!1,collapse:t.isCollapse,"collapse-transition":!1,disabled:!0,"background-color":"#10394c","text-color":"#fff","active-text-color":"#ffd04b"}},[a("router-link",{staticClass:"clearfix avatar-wrap",attrs:{to:{name:"center"},tag:"div"}},[a("div",{staticClass:"avatar fl"},[t.state.userInfo.Avatar?t._e():a("img",{attrs:{src:"./static/images/avatar.jpg",alt:"头像"}}),t._v(" "),t.state.userInfo.Avatar?a("img",{attrs:{src:t.state.userInfo.Avatar,alt:"头像"}}):t._e()]),t._v(" "),a("span",{staticClass:"nickname fl"},[t._v(t._s(t.state.userInfo.NickName||t.state.userInfo.UserName||"用户"))])]),t._v(" "),a("el-submenu",{attrs:{index:"1","hide-timeout":0,"show-timeout":0}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-tickets"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("App管理")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"1-1"}},[a("router-link",{attrs:{to:{name:"appList"}}},[t._v("App列表")])],1),t._v(" "),t.state.isManager||t.state.isDevelop?a("el-menu-item",{attrs:{index:"1-2"}},[a("router-link",{attrs:{to:{name:"addApp"}}},[t._v("添加App")])],1):t._e()],1)],2),t._v(" "),t.state.isManager?a("el-submenu",{attrs:{index:"2","hide-timeout":0,"show-timeout":0}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-star-off"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"2-1"}},[a("router-link",{attrs:{to:{name:"userList"}}},[t._v("用户列表")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"2-2"}},[a("router-link",{attrs:{to:{name:"addUser"}}},[t._v("添加用户")])],1)],1)],2):t._e(),t._v(" "),a("router-link",{attrs:{to:{name:"center"},tag:"div"}},[a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-view"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人信息")])])],1),t._v(" "),t.state.showMarket?a("router-link",{attrs:{to:{name:"appMarket"},tag:"div"}},[a("el-menu-item",{attrs:{index:"5"}},[a("i",{staticClass:"el-icon-goods"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("App市场")])])],1):t._e(),t._v(" "),a("router-link",{attrs:{to:{name:"settings"},tag:"div"}},[t.state.isManager?a("el-menu-item",{attrs:{index:"6"}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("设置")])]):t._e()],1),t._v(" "),t.state.showContact?a("router-link",{attrs:{to:{name:"contact"},tag:"div"}},[a("el-menu-item",{attrs:{index:"7"}},[a("i",{staticClass:"el-icon-phone-outline"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("联系我们")])])],1):t._e()],1)],1),t._v(" "),a("el-container",[a("el-header",{staticClass:"main-header",attrs:{height:"30"}},[a("div",{staticClass:"btn-toggle-aside el-icon-d-arrow-left",class:{"is-collapse":t.isCollapse},on:{click:t.toggleAsideCollapse}}),t._v(" "),a("div",{staticClass:"cms-title fl"},[t._v("App管理系统")]),t._v(" "),a("el-button",{staticClass:"fr",attrs:{size:"mini",round:""},on:{click:t.logout}},[t._v("退出")])],1),t._v(" "),a("el-main",{staticClass:"cms-main-body"},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("LV7X")},"data-v-2af70d36",null).exports,m=a("woOf"),f=a.n(m),h={ShowWeb:0,Url:"",AppPreviewUrl:"",IsUpdate:0,UpdateUrl:"",isPublish:0,PushKey:"",CustId:"",Remark:"",IsPublish:""},v={name:"AppList",data:function(){var t=this,e=function(t,e,a){return function(s,i,o){console.log("value: "+i+", valName: "+e+", dataType: "+t+", required: "+a),""===i?(!a&&o(),a&&o(new Error("请输入"+e))):window.$myCommon.testValid(i,t)?o():o(new Error("请输入正确的"+e))}};return{state:window.$store.state,appDataPreviewUrl:window.API_ROUTER.appDataPreviewUrl,appTable:null,appDetailInfo:{},appEditInfo:{},appModifyForm:null,curPage:1,totalPage:20,totalRecordNum:1e3,perPageRecordNum:10,isShowAppEditDialog:!1,isShowAppDetailDialog:!1,isShowBatchEditDialog:!1,isShowBatchUrlDialog:!1,isCreateApp:!1,appEditInfoIndex:-1,selectedIds:[],appBatchEditInfo:f()({},h),batchIsShowWeb:"",isShowBatchCustomDialog:!1,batchCustomId:"",isShowBatchPublishDialog:!1,batchIsPublish:"",searchProps:{appName:"",appId:"",type:"",showWeb:"",isUpdate:"",startDate:"",endDate:"",authorId:"",custId:"",isPublish:""},appTypes:[{label:"全部机型",value:""},{label:"android",value:"android"},{label:"ios",value:"ios"}],appRedirectStatus:[{label:"全部跳转",value:""},{label:"跳转",value:1},{label:"不跳转",value:0}],isPublishOptions:[{label:"发布情况",value:""},{label:"已发布",value:1},{label:"未发布",value:0}],pickerStartDateOptions:{disabledDate:function(e){var a=e.getTime();if(a>Date.now())return!0;var s=t.searchProps.endDate;return!!(s&&a>s)}},pickerEndDateOptions:{disabledDate:function(e){var a=e.getTime();if(a>Date.now())return!0;var s=t.searchProps.startDate;return!!(s&&a<s)}},appListData:[],appModifyRules:{AppPreviewUrl:[{validator:e("url","App预览地址",!1),trigger:"blur"}],UpdateUrl:[{validator:e("url","强更地址",!1),trigger:"blur"}],Url:[{validator:e("url","跳转地址",!1),trigger:"blur"}]}}},computed:{hasSelectedItem:function(){var t=this.appTable;return!t||t.selection.length<1}},watch:{$route:function(t,e){var a=this;"addApp"==t.name&&this.$nextTick(function(){a.handleEditApp(-1,{},!0)})}},methods:{filterTag:function(t,e,a){return e[a.property]==t},toggleSelection:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"selectAll",a=this.$refs.appTable;if(t&&t.length>0)t.forEach(function(t){a.toggleRowSelection(t)});else switch(e){case"cancelAll":a.clearSelection();break;case"selectAll":a.data.forEach(function(t){a.toggleRowSelection(t,!0)})}},handlePaginationPageChange:function(t){this.curPage=t,this.getAppList()},handleShowAppDetail:function(t,e){this.appDetailInfo=f()({},e),this.isShowAppDetailDialog=!0},handleEditApp:function(t,e,a){this.$refs.appModifyForm&&this.$refs.appModifyForm.resetFields(),a?e.Type="android":this.appEditInfoIndex=t,this.appEditInfo=f()({},e),this.isShowAppEditDialog=!0,this.isCreateApp=!!a},submitAppEditInfo:function(){var t=this.appEditInfo,e={appName:t.Name,appId:t.AppId,showWeb:t.ShowWeb?1:0,url:t.Url,isUpdate:t.IsUpdate?1:0,updateUrl:t.UpdateUrl,remark:t.Remark,type:t.Type,pushKey:t.PushKey,previewUrl:t.AppPreviewUrl,custId:t.CustId,isPublish:t.IsPublish?1:0};this.isCreateApp?this._addApp(e):(console.log(t),e.id=t.Id,this._editApp(e))},_addApp:function(t,e){var a=this;window.$cmsApi.createApp(t,function(t){e&&e(t),a.isShowAppEditDialog=!1,a.$message({message:"添加成功",type:"success",showClose:!0});var s=$store.state.userInfo;a.appEditInfo.AuthorId=s.Id,a.appEditInfo.Id=t.data.Id,a.appEditInfo.AuthorName=s.NickName||s.UserName||"",a.appEditInfo.CustName=window.$myCommon.getCustNameById(s.CustId);var i=a._formatAppItem(a.appEditInfo);a.appListData.unshift(i)},function(t){window.$myCommon.toast(t||"网络连接错误")})},_editApp:function(t,e){var a=this;window.$cmsApi.updateApp(t,function(t){e&&e(t),a.isShowAppEditDialog=!1,a.isShowAppDetailDialog=!1,a.$message({message:"修改成功",type:"success",showClose:!0}),a.appEditInfo.CustName=window.$myCommon.getCustNameById(a.appEditInfo.CustId);var s=a._formatAppItem(a.appEditInfo);a.appListData.splice(a.appEditInfoIndex,1,s)},function(t){window.$myCommon.toast(t||"网络连接错误")})},handleDeleteApp:function(t,e){var a=this;this.$confirm("确认删除app：《"+e.Name+"》 吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){window.$cmsApi.deleteApp(e.Id,function(){a.$message({type:"success",message:"删除成功!"}),a.appListData.splice(t,1)},function(t){window.$myCommon.toast(t||"网络连接错误")})}).catch(function(){})},handlePublishApp:function(t,e){var a=this;this.$confirm("确认将app：《"+e.Name+"》 发布到App市场吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){window.$cmsApi.publishApp(e.Id,1,function(){a.$message({type:"success",message:"已发布到App市场!"}),e.IsPublish=1,e.CustName=window.$myCommon.getCustNameById(e.CustId),a.appListData.splice(t,1,e)},function(t){window.$myCommon.toast(t||"网络连接错误")})}).catch(function(){})},handleUnPublishApp:function(t,e){var a=this;this.$confirm("确认撤销发布app：《"+e.Name+"》吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){window.$cmsApi.publishApp(e.Id,0,function(){a.$message({type:"success",message:"已撤销发布!"}),e.IsPublish=0,e.CustName=window.$myCommon.getCustNameById(e.CustId),a.appListData.splice(t,1,e)},function(t){window.$myCommon.toast(t||"网络连接错误")})}).catch(function(){})},handlePreviewApp:function(t,e){var a=e.AppPreviewUrl;a&&window.open(a,"_blank")},handlerCloseModifyAppPop:function(t){this.$router.push({name:"appList"}),t()},showBatchPop:function(){this.appBatchEditInfo=f()({},h),this.isShowBatchEditDialog=!0},submitAppBatchEditInfo:function(){var t=this,e=this.appBatchEditInfo,a={showWeb:e.ShowWeb?1:0,url:e.Url,isUpdate:e.IsUpdate?1:0,updateUrl:e.UpdateUrl,remark:e.Remark,type:e.Type,pushKey:e.PushKey,previewUrl:e.AppPreviewUrl,custId:e.CustId,isPublish:e.IsPublish?1:0};this.updateBatchProp(a,function(e){t.$message({type:"success",message:"已成功批量修改"}),t.isShowBatchEditDialog=!1,t.appBatchEditInfo=f()({},h)})},showBatchEditUrlPop:function(){var t=this;this.$prompt("请输入跳转地址","批量修改跳转地址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/((http|ftp|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/,inputErrorMessage:"地址格式不正确"}).then(function(e){var a=e.value;t.updateBatchProp({url:a},function(e){t.$message({type:"success",message:"已成功批量修改跳转地址为: "+a})})}).catch(function(){})},showBatchShowWebPop:function(){this.isShowBatchUrlDialog=!0,this.batchIsShowWeb=""},saveBatchShowWeb:function(){var t=this;this.isShowBatchUrlDialog=!1;var e=!0===this.batchIsShowWeb?1:0;this.updateBatchProp({showWeb:e},function(a){t.$message({type:"success",message:"已成功批量修改为"+(e?"跳转":"不跳转")})})},showBatchEditCustomPop:function(){this.isShowBatchCustomDialog=!0,this.batchCustomId=""},saveBatchCustom:function(){var t=this,e=this.batchCustomId;this.updateBatchProp({custId:e},function(a){t.isShowBatchCustomDialog=!1;var s=_.find(window.$store.state.allUserList,{Id:e})||s;t.$message({type:"success",message:"已成功批量修改分配用户为"+(s.NickName||s.UserName)})})},showBatchEditPublishPop:function(){this.isShowBatchPublishDialog=!0,this.batchIsPublish=""},saveBatchIsPublish:function(){var t=this;if(""===this.batchIsPublish)return this.$message({type:"error",message:"请选择是否发布到App市场"});var e=this.batchIsPublish?1:0;this.updateBatchProp({isPublish:e},function(e){t.isShowBatchPublishDialog=!1,t.$message({type:"success",message:"已成功批量发布到App市场"})})},updateBatchProp:function(t,e){var a=this,s=this.selectedIds||[],i=s.join(",");s.length<1||window.$cmsApi.updateAppByIds(i,t,function(t){e&&e(t),a.isShowAppEditDialog=!1,a.isShowAppDetailDialog=!1,a.$message({message:"已批量修改成功",type:"success",showClose:!0}),a.getAppList()},function(t){window.$myCommon.toast(t||"网络连接错误")})},_getSearchParams:function(){var t=this.searchProps||{},e=t.appName,a=t.appId,s=t.type,i=t.authorId,o=t.showWeb,n=t.custId,l=t.isPublish,r=t.startDate,p=t.endDate;return{page:this.curPage,pageSize:this.perPageRecordNum,appName:e,appId:a,type:s,authorId:i,showWeb:o,custId:n,isPublish:l,startDate:r,endDate:p?p+864e5:""}},getAppList:function(){var t=this,e=this._getSearchParams();window.$cmsApi.getAppList(e,function(e){var a=e.data||{},s=a.count||{};t.appListData=t._formatAppList(a.list||[]),t.totalPage=s.pageCount||1,t.totalRecordNum=s.totalCount||0},function(t){window.$myCommon.toast(t||"网络连接错误")})},_formatAppItem:function(t){return t.ShowWebStr=t.ShowWeb?"是":"否",t.IsUpdateStr=t.IsUpdate?"是":"否",t},_formatAppList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _.each(e,function(e,a){e=t._formatAppItem(e)}),e},searchAppList:function(){this.getAppList()},handleSelectionChange:function(t){this.selectedIds=_.map(t||[],"Id")||[]},exportCurPageExcel:function(){var t=this._getSearchParams();window.$cmsApi.exportAppExcel(t)},exportAllExcel:function(){window.$cmsApi.exportAppExcel({pageSize:1e3,page:1})}},mounted:function(){var t=this;this.appTable=this.$refs.appTable,"addApp"==this.$route.name&&this.handleEditApp(-1,{},!0),window.$myCommon.checkLogin(function(e){t.getAppList()})}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-page-applist cms-p-list"},[a("div",{staticClass:"cms-i-nav"},[a("div",{staticClass:"nav-title el-icon-location-outline"},[t._v("App列表")]),t._v(" "),a("div",{staticClass:"button-group fr"},[t.state.isCustom?t._e():a("el-button",{attrs:{type:"success",round:"",size:"mini"},on:{click:function(e){t.handleEditApp(-1,{},!0)}}},[t._v("添加app")]),t._v(" "),a("el-button",{attrs:{type:"warning",round:"",plain:"",size:"mini",icon:"el-icon-download"},on:{click:t.exportCurPageExcel}},[t._v("导出本页结果")]),t._v(" "),a("el-button",{attrs:{type:"danger",round:"",plain:"",size:"mini",icon:"el-icon-download"},on:{click:t.exportAllExcel}},[t._v("导出全部")])],1)]),t._v(" "),a("div",{staticClass:"search-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"应用名称",clearable:"",maxlength:"50"},model:{value:t.searchProps.appName,callback:function(e){t.$set(t.searchProps,"appName",e)},expression:"searchProps.appName"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"应用Id",clearable:""},model:{value:t.searchProps.appId,callback:function(e){t.$set(t.searchProps,"appId",e)},expression:"searchProps.appId"}})],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.searchProps.type,callback:function(e){t.$set(t.searchProps,"type",e)},expression:"searchProps.type"}},t._l(t.appTypes,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"添加时间:"}},[a("el-date-picker",{attrs:{align:"center",type:"date",placeholder:"开始日期","picker-options":t.pickerStartDateOptions,format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:t.searchProps.startDate,callback:function(e){t.$set(t.searchProps,"startDate",e)},expression:"searchProps.startDate"}}),a("span",[t._v(" - ")]),t._v(" "),a("el-date-picker",{attrs:{align:"center",type:"date",placeholder:"结束日期","picker-options":t.pickerEndDateOptions,format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:t.searchProps.endDate,callback:function(e){t.$set(t.searchProps,"endDate",e)},expression:"searchProps.endDate"}})],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"是否跳转"},model:{value:t.searchProps.showWeb,callback:function(e){t.$set(t.searchProps,"showWeb",e)},expression:"searchProps.showWeb"}},t._l(t.appRedirectStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"开发者"},model:{value:t.searchProps.authorId,callback:function(e){t.$set(t.searchProps,"authorId",e)},expression:"searchProps.authorId"}},t._l(t.state.devUserList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.NickName+"                       "+e.UserName,value:e.Id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.NickName))]),t._v(" "),a("span",{staticStyle:{float:"right","margin-left":"10px",color:"#67c23b","font-size":"12px"}},[t._v(t._s(e.UserName))])])}))],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"所属客户"},model:{value:t.searchProps.custId,callback:function(e){t.$set(t.searchProps,"custId",e)},expression:"searchProps.custId"}},t._l(t.state.custUserList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.NickName+"                       "+e.UserName,value:e.Id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.NickName))]),t._v(" "),a("span",{staticStyle:{float:"right","margin-left":"10px",color:"#67c23b","font-size":"12px"}},[t._v(t._s(e.UserName))])])}))],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"是否已发布"},model:{value:t.searchProps.isPublish,callback:function(e){t.$set(t.searchProps,"isPublish",e)},expression:"searchProps.isPublish"}},t._l(t.isPublishOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchAppList}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("div",{staticClass:"batch-btns-box"},[a("el-row",[a("el-button",{attrs:{round:"",size:"mini"},on:{click:function(e){t.toggleSelection([],"selectAll")}}},[t._v("全选")]),t._v(" "),a("el-button",{attrs:{round:"",size:"mini"},on:{click:function(e){t.toggleSelection([],"cancelAll")}}},[t._v("取消选择")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini",disabled:!!t.hasSelectedItem},on:{click:t.showBatchShowWebPop}},[t._v("批量跳转/不跳转")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini",disabled:!!t.hasSelectedItem},on:{click:t.showBatchEditUrlPop}},[t._v("一键修改跳转地址")]),t._v(" "),t.state.isCustom?t._e():a("el-button",{attrs:{type:"primary",round:"",size:"mini",disabled:!!t.hasSelectedItem},on:{click:t.showBatchEditCustomPop}},[t._v("一键分配客户")]),t._v(" "),t.state.isCustom?t._e():a("el-button",{attrs:{type:"primary",round:"",size:"mini",disabled:!!t.hasSelectedItem},on:{click:t.showBatchEditPublishPop}},[t._v("一键发布到App市场")]),t._v(" "),t.state.isCustom?t._e():a("el-button",{attrs:{type:"danger",round:"",size:"mini",disabled:!!t.hasSelectedItem},on:{click:t.showBatchPop}},[t._v("批量修改属性")]),t._v(" "),t.state.isCustom?t._e():a("el-button",{attrs:{type:"success",round:"",size:"mini",disabled:""}},[t._v("批量查询上架状态")])],1)],1),t._v(" "),a("el-table",{ref:"appTable",staticClass:"app-table",staticStyle:{width:"100%","text-align":"center"},attrs:{border:"",data:t.appListData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"35",label:"选择"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"App名",width:"140",align:"center",sortable:"","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"t-appname",on:{click:function(a){t.handleShowAppDetail(e.$index,e.row)}}},[t._v(t._s(e.row.Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"AppId",label:"AppId",align:"center",width:"180",sortable:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Type",label:"类型",width:"90",align:"center",filters:[{text:"android",value:"android"},{text:"ios",value:"ios"}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Type?a("el-tag",{attrs:{size:"small",type:"android"==e.row.Type?"danger":"success","close-transition":""}},[t._v(t._s(e.row.Type))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ShowWebStr",label:"是否跳转",width:"90",align:"center",filters:[{text:"是",value:"是"},{text:"否",value:"否"}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ShowWebStr?a("el-tag",{attrs:{size:"mini",type:"是"==e.row.ShowWebStr?"success":"info","close-transition":""}},[t._v(t._s("是"==e.row.ShowWebStr?"跳转":"不跳转"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Url",label:"跳转地址","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"IsUpdateStr",label:"是否强更",width:"90",align:"center",filters:[{text:"是",value:"是"},{text:"否",value:"否"}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.IsUpdateStr?a("el-tag",{attrs:{size:"mini",type:"是"==e.row.IsUpdateStr?"success":"info","close-transition":""}},[t._v(t._s("是"==e.row.IsUpdateStr?"是":"否"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdateUrl",label:"强更地址",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"PushKey",label:"推送Key",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"AppPreviewUrl",label:"App预览地址",align:"center",width:"135","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"a-url",attrs:{href:e.row.AppPreviewUrl,target:"_blank"}},[t._v(t._s(e.row.AppPreviewUrl))])]}}])}),t._v(" "),t.state.isCustom?t._e():a("el-table-column",{attrs:{prop:"IsPublish",label:"已发布",width:"90",align:"center",filters:[{text:"是",value:1},{text:"否",value:0}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini",type:e.row.IsPublish?"success":"info","close-transition":""}},[t._v(t._s(e.row.IsPublish?"是":"否"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"AuthorName",label:"创建人员",align:"center",width:"101",sortable:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"CustName",label:"所属客户",align:"center",width:"101",sortable:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"IsPublish",label:"应用数据",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticStyle:{color:"#a0cfff","font-size":"13px"},attrs:{href:t.appDataPreviewUrl+e.row.AppId,target:"_blank"}},[t._v("应用数据")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:t.state.isCustom?100:160,fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.state.isCustom?t._e():a("el-tooltip",{attrs:{effect:"dark",content:"删除"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){t.handleDeleteApp(e.$index,e.row)}}})],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"编辑"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){t.handleEditApp(e.$index,e.row)}}})],1),t._v(" "),e.row.IsPublish||t.state.isCustom?t._e():a("el-tooltip",{attrs:{effect:"dark",content:"点击发布到App市场"}},[a("el-button",{attrs:{type:"info",icon:"el-icon-upload",circle:""},on:{click:function(a){t.handlePublishApp(e.$index,e.row)}}})],1),t._v(" "),e.row.IsPublish&&!t.state.isCustom?a("el-tooltip",{attrs:{effect:"dark",content:"点击撤销发布"}},[a("el-button",{attrs:{type:"info",icon:"el-icon-sold-out",circle:""},on:{click:function(a){t.handleUnPublishApp(e.$index,e.row)}}})],1):t._e(),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.row.AppPreviewUrl,expression:"!!scope.row.AppPreviewUrl"}],attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){t.handlePreviewApp(e.$index,e.row)}}},[t._v("预览")])]}}])})],1),t._v(" "),a("div",{staticClass:"i-pagination clearfix"},[a("div",{staticClass:"pagination-info fl"},[t._v("\n    总共"),a("span",{staticClass:"num"},[t._v(" "+t._s(t.totalRecordNum))]),t._v(" 条记录，每页 "),a("span",{staticClass:"num"},[t._v(t._s(t.perPageRecordNum))]),t._v(" 条，总页数："),a("span",{staticClass:"num"},[t._v(t._s(t.totalPage))]),t._v("，当前是第 "),a("span",{staticClass:"num"},[t._v(t._s(t.curPage))]),t._v(" 页。")]),t._v(" "),a("el-pagination",{staticClass:"fr",attrs:{background:"",layout:"prev, pager, next, jumper","current-page":1,"page-count":t.totalPage||1,"pager-count":5},on:{"current-change":t.handlePaginationPageChange}})],1),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:t.isCreateApp?"添加App":"编辑App",top:t.isCreateApp?"10vh":"5vh",rules:t.appModifyRules,"before-close":t.handlerCloseModifyAppPop,visible:t.isShowAppEditDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowAppEditDialog=e}}},[a("el-form",{ref:"appModifyForm",attrs:{model:t.appModifyForm,"label-position":"left","label-width":"110px",size:"mini"}},[a("el-form-item",{attrs:{label:"app名称：",required:""}},[a("el-input",{attrs:{placeholder:"请输入app名称",disabled:t.state.isCustom,clearable:""},model:{value:t.appEditInfo.Name,callback:function(e){t.$set(t.appEditInfo,"Name",e)},expression:"appEditInfo.Name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appId：",required:""}},[a("el-input",{attrs:{placeholder:"请输入appId(不可重复)",disabled:t.state.isCustom,clearable:""},model:{value:t.appEditInfo.AppId,callback:function(e){t.$set(t.appEditInfo,"AppId",e)},expression:"appEditInfo.AppId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"app类型："}},[a("el-radio",{attrs:{label:"android",disabled:t.state.isCustom},model:{value:t.appEditInfo.Type,callback:function(e){t.$set(t.appEditInfo,"Type",e)},expression:"appEditInfo.Type"}},[t._v("android")]),t._v(" "),a("el-radio",{attrs:{label:"ios",disabled:t.state.isCustom},model:{value:t.appEditInfo.Type,callback:function(e){t.$set(t.appEditInfo,"Type",e)},expression:"appEditInfo.Type"}},[t._v("ios")])],1),t._v(" "),a("el-form-item",{attrs:{label:"App预览地址：",prop:"AppPreviewUrl"}},[a("el-input",{attrs:{placeholder:"请输入App预览地址",disabled:t.state.isCustom,clearable:""},model:{value:t.appEditInfo.AppPreviewUrl,callback:function(e){t.$set(t.appEditInfo,"AppPreviewUrl",e)},expression:"appEditInfo.AppPreviewUrl"}})],1),t._v(" "),a("el-form-item",{staticClass:"clearfix",attrs:{label:"开启跳转：","label-width":"85px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.appEditInfo.ShowWeb,callback:function(e){t.$set(t.appEditInfo,"ShowWeb",e)},expression:"appEditInfo.ShowWeb"}}),t._v(" "),a("el-input",{staticStyle:{width:"210px","margin-left":"5px"},attrs:{prop:"Url",placeholder:"请输入跳转地址",clearable:""},model:{value:t.appEditInfo.Url,callback:function(e){t.$set(t.appEditInfo,"Url",e)},expression:"appEditInfo.Url"}})],1),t._v(" "),a("el-form-item",{staticClass:"clearfix",attrs:{label:"强制更新：","label-width":"85px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.appEditInfo.IsUpdate,callback:function(e){t.$set(t.appEditInfo,"IsUpdate",e)},expression:"appEditInfo.IsUpdate"}}),t._v(" "),a("el-input",{staticStyle:{width:"210px","margin-left":"5px"},attrs:{prop:"UpdateUrl",placeholder:"请输入强制更新地址",clearable:""},model:{value:t.appEditInfo.UpdateUrl,callback:function(e){t.$set(t.appEditInfo,"UpdateUrl",e)},expression:"appEditInfo.UpdateUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"极光推送key："}},[a("el-input",{attrs:{placeholder:"请输入极光推送key",clearable:""},model:{value:t.appEditInfo.PushKey,callback:function(e){t.$set(t.appEditInfo,"PushKey",e)},expression:"appEditInfo.PushKey"}})],1),t._v(" "),t.isCreateApp?t._e():a("el-form-item",{attrs:{label:"所属客户："}},[a("el-select",{attrs:{filterable:"",disabled:t.state.isCustom,clearable:"",placeholder:"请选择"},model:{value:t.appEditInfo.CustId,callback:function(e){t.$set(t.appEditInfo,"CustId",e)},expression:"appEditInfo.CustId"}},t._l(t.state.custUserList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.NickName+"                                              "+e.UserName,value:e.Id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.NickName))]),t._v(" "),a("span",{staticStyle:{float:"right","margin-left":"10px",color:"#67c23b","font-size":"12px"}},[t._v(t._s(e.UserName))])])}))],1),t._v(" "),a("el-form-item",{staticClass:"clearfix",attrs:{label:"发布到App市场：","label-width":"130px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:t.state.isCustom},model:{value:t.appEditInfo.IsPublish,callback:function(e){t.$set(t.appEditInfo,"IsPublish",e)},expression:"appEditInfo.IsPublish"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:t.appEditInfo.Remark,callback:function(e){t.$set(t.appEditInfo,"Remark",e)},expression:"appEditInfo.Remark"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowAppEditDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAppEditInfo}},[t._v("提 交")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:"App信息",top:"5vh",visible:t.isShowAppDetailDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowAppDetailDialog=e}}},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fr",staticStyle:{margin:"-9px 0 5px"},attrs:{type:"danger",icon:"el-icon-edit",size:"mini"},on:{click:function(e){t.handleEditApp(t.appDetailInfo.index,t.appDetailInfo)}}},[t._v("编辑")])],1),t._v(" "),a("ul",{staticClass:"i-appmodify-list"},[a("li",[a("span",{staticClass:"i-m-tag"},[t._v("app名称：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.Name))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("appId：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.AppId))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("app类型：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.Type))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("App预览地址：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.AppPreviewUrl))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("开启跳转：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.ShowWebStr))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("跳转地址：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.Url))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("强制更新：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.IsUpdateStr))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("强制更新地址：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.UpdateUrl))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("极光推送key：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.PushKey))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("所属客户：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.CustName))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("开发者：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.AuthorName))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("发布到App市场：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.IsPublish?"是":"否"))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("应用数据：")]),a("a",{staticClass:"i-m-val",attrs:{href:t.appDataPreviewUrl+t.appDetailInfo.AppId,target:"_blank"}},[t._v("\n        点击查看\n      ")])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("备注：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.appDetailInfo.Remark))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("创建时间：")]),a("span",{staticClass:"i-m-val"},[t._v("\n        "+t._s(t.appDetailInfo.CreateTime?new Date(t.appDetailInfo.CreateTime).toLocaleDateString():"")+"\n      ")])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("更新时间：")]),a("span",{staticClass:"i-m-val"},[t._v("\n        "+t._s(t.appDetailInfo.UpdateTime?new Date(t.appDetailInfo.UpdateTime).toLocaleDateString():"")+"\n      ")])])])]),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:"批量修改app属性",top:"15vh",visible:t.isShowBatchEditDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowBatchEditDialog=e}}},[a("el-form",{ref:"appBatchModifyForm",attrs:{"label-position":"left","label-width":"110px",size:"mini"}},[a("el-form-item",{attrs:{label:"App预览地址："}},[a("el-input",{attrs:{placeholder:"请输入App预览地址(不修改勿填写)",clearable:""},model:{value:t.appBatchEditInfo.AppPreviewUrl,callback:function(e){t.$set(t.appBatchEditInfo,"AppPreviewUrl",e)},expression:"appBatchEditInfo.AppPreviewUrl"}})],1),t._v(" "),a("el-form-item",{staticClass:"clearfix",attrs:{label:"开启跳转：","label-width":"85px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.appBatchEditInfo.ShowWeb,callback:function(e){t.$set(t.appBatchEditInfo,"ShowWeb",e)},expression:"appBatchEditInfo.ShowWeb"}}),t._v(" "),a("el-input",{staticStyle:{width:"210px","margin-left":"5px"},attrs:{placeholder:"请输入跳转地址(不修改勿填写)",clearable:""},model:{value:t.appBatchEditInfo.Url,callback:function(e){t.$set(t.appBatchEditInfo,"Url",e)},expression:"appBatchEditInfo.Url"}})],1),t._v(" "),a("el-form-item",{staticClass:"clearfix",attrs:{label:"强制更新：","label-width":"85px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.appBatchEditInfo.IsUpdate,callback:function(e){t.$set(t.appBatchEditInfo,"IsUpdate",e)},expression:"appBatchEditInfo.IsUpdate"}}),t._v(" "),a("el-input",{staticStyle:{width:"210px","margin-left":"5px"},attrs:{placeholder:"请输入强制更新地址(不修改勿填写)",clearable:""},model:{value:t.appBatchEditInfo.UpdateUrl,callback:function(e){t.$set(t.appBatchEditInfo,"UpdateUrl",e)},expression:"appBatchEditInfo.UpdateUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"极光推送key："}},[a("el-input",{attrs:{placeholder:"请输入极光推送key(不修改勿填写)",clearable:""},model:{value:t.appBatchEditInfo.PushKey,callback:function(e){t.$set(t.appBatchEditInfo,"PushKey",e)},expression:"appBatchEditInfo.PushKey"}})],1),t._v(" "),t.isCreateApp?t._e():a("el-form-item",{attrs:{label:"所属客户："}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择(不修改勿填写)"},model:{value:t.appBatchEditInfo.CustId,callback:function(e){t.$set(t.appBatchEditInfo,"CustId",e)},expression:"appBatchEditInfo.CustId"}},t._l(t.state.custUserList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.NickName+"                                                                     "+e.UserName,value:e.Id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.NickName))]),t._v(" "),a("span",{staticStyle:{float:"right","margin-left":"10px",color:"#67c23b","font-size":"12px"}},[t._v(t._s(e.UserName))])])}))],1),t._v(" "),a("el-form-item",{staticClass:"clearfix",attrs:{label:"发布到App市场：","label-width":"130px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.appEditInfo.IsPublish,callback:function(e){t.$set(t.appEditInfo,"IsPublish",e)},expression:"appEditInfo.IsPublish"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"备注(不修改勿填写)"},model:{value:t.appBatchEditInfo.Remark,callback:function(e){t.$set(t.appBatchEditInfo,"Remark",e)},expression:"appBatchEditInfo.Remark"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowBatchEditDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAppBatchEditInfo}},[t._v("批量修改")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:"批量修改跳转/不跳转",top:"15vh",visible:t.isShowBatchUrlDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowBatchUrlDialog=e}}},[a("el-form",{attrs:{"label-position":"left","label-width":"110px",size:"mini"}},[a("el-form-item",{staticClass:"clearfix",attrs:{label:"开启跳转：","label-width":"85px"}},[a("el-radio",{attrs:{label:!1},model:{value:t.batchIsShowWeb,callback:function(e){t.batchIsShowWeb=e},expression:"batchIsShowWeb"}},[t._v("不跳转")]),t._v(" "),a("el-radio",{attrs:{label:!0},model:{value:t.batchIsShowWeb,callback:function(e){t.batchIsShowWeb=e},expression:"batchIsShowWeb"}},[t._v("跳转")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(e){t.isShowBatchUrlDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.saveBatchShowWeb}},[t._v("批量修改")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:"批量修改分配用户",top:"25vh",visible:t.isShowBatchCustomDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowBatchCustomDialog=e}}},[a("el-form",{attrs:{"label-position":"left","label-width":"110px",size:"mini"}},[a("el-form-item",[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"所属客户"},model:{value:t.batchCustomId,callback:function(e){t.batchCustomId=e},expression:"batchCustomId"}},t._l(t.state.custUserList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.NickName+"                                                                     "+e.UserName,value:e.Id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.NickName))]),t._v(" "),a("span",{staticStyle:{float:"right","margin-left":"10px",color:"#67c23b","font-size":"12px"}},[t._v(t._s(e.UserName))])])}))],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(e){t.isShowBatchCustomDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.saveBatchCustom}},[t._v("批量修改")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:"批量发布到App市场：",top:"15vh",visible:t.isShowBatchPublishDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowBatchPublishDialog=e}}},[a("el-form",{attrs:{"label-position":"left","label-width":"110px",size:"mini"}},[a("el-form-item",{staticClass:"clearfix",attrs:{label:"","label-width":"85px"}},[a("el-radio",{attrs:{label:!1},model:{value:t.batchIsPublish,callback:function(e){t.batchIsPublish=e},expression:"batchIsPublish"}},[t._v("不发布")]),t._v(" "),a("el-radio",{attrs:{label:!0},model:{value:t.batchIsPublish,callback:function(e){t.batchIsPublish=e},expression:"batchIsPublish"}},[t._v("发布")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(e){t.isShowBatchPublishDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.saveBatchIsPublish}},[t._v("批量修改")])],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(v,g,!1,function(t){a("3hvS")},"data-v-56a3edac",null).exports,b={name:"AppList",data:function(){return{appTable:null,curPage:1,totalPage:10,totalRecordNum:1e3,perPageRecordNum:10,searchProps:{appName:"",appId:"",type:""},appTypes:[{label:"全部类型",value:""},{label:"android",value:"android"},{label:"ios",value:"ios"}],appListData:[]}},computed:{hasSelectedItem:function(){var t=this.appTable;return!t||t.selection.length<1}},methods:{filterTag:function(t,e,a){return e[a.property]==t},handlePaginationPageChange:function(t){this.curPage=t,this.getAppList()},handlePreviewApp:function(t,e){var a=e.AppPreviewUrl;a&&window.open(a,"_blank")},getAppList:function(){var t=this,e=this.searchProps||{},a=(e.page,e.pageSize,e.appName),s=e.appId,i=e.type,o={page:this.curPage,pageSize:this.perPageRecordNum,appName:a,appId:s,type:i};window.$cmsApi.getAppListOfMarket(o,function(e){var a=e.data||{},s=a.count||{};t.appListData=t._formatAppList(a.list||[]),t.totalPage=s.pageCount||1,t.totalRecordNum=s.totalCount||0},function(t){window.$myCommon.toast(t||"网络连接错误")})},_formatAppItem:function(t){return t.IsUpdateStr=t.ShowWeb?"是":"否",t.IsUpdateStr=t.IsUpdate?"是":"否",t},_formatAppList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _.each(e,function(e,a){e=t._formatAppItem(e)}),e},exportCurPageExcel:function(){var t=this.searchProps||{},e={page:t.page,pageSize:t.pageSize,appName:t.appName,appId:t.appId,type:t.type};window.$cmsApi.exportAppMarketExcel(e)},exportAllExcel:function(){window.$cmsApi.exportAppMarketExcel({pageSize:1e3,page:1})}},mounted:function(){var t=this;this.appTable=this.$refs.appTable,window.$myCommon.checkLogin(function(e){t.getAppList()},function(){})}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-page-applist cms-p-list"},[a("div",{staticClass:"cms-i-nav"},[a("div",{staticClass:"nav-title el-icon-location-outline"},[t._v("App市场")]),t._v(" "),a("div",{staticClass:"button-group fr"},[a("el-button",{attrs:{type:"warning",round:"",plain:"",size:"mini",icon:"el-icon-download\n"},on:{click:t.exportCurPageExcel}},[t._v("导出本页结果")]),t._v(" "),a("el-button",{attrs:{type:"danger",round:"",plain:"",size:"mini",icon:"el-icon-download\n"},on:{click:t.exportAllExcel}},[t._v("导出全部")])],1)]),t._v(" "),a("div",{staticClass:"search-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"应用名称",clearable:"",maxlength:"50"},model:{value:t.searchProps.appName,callback:function(e){t.$set(t.searchProps,"appName",e)},expression:"searchProps.appName"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"应用Id",clearable:""},model:{value:t.searchProps.appId,callback:function(e){t.$set(t.searchProps,"appId",e)},expression:"searchProps.appId"}})],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.searchProps.type,callback:function(e){t.$set(t.searchProps,"type",e)},expression:"searchProps.type"}},t._l(t.appTypes,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getAppList}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{ref:"appTable",staticClass:"app-table",staticStyle:{width:"100%"},attrs:{border:"",data:t.appListData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"App名",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"t-appname"},[t._v(t._s(e.row.Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"AppId",label:"AppId",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Type",label:"类型",width:"90",align:"center",filters:[{text:"android",value:"android"},{text:"ios",value:"ios"}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Type?a("el-tag",{attrs:{size:"small",type:"android"==e.row.Type?"danger":"success","close-transition":""}},[t._v(t._s(e.row.Type))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ShowWeb",label:"是否跳转",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ShowWeb?a("el-tag",{attrs:{size:"mini",type:e.row.ShowWeb?"success":"info","close-transition":""}},[t._v(t._s(e.row.ShowWeb?"跳转":"不跳转"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Url",label:"跳转地址",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.Url||"-")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"IsUpdate",label:"是否强更",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.IsUpdate?a("el-tag",{attrs:{size:"mini",type:e.row.IsUpdate?"success":"info","close-transition":""}},[t._v(t._s(e.row.IsUpdate?"是":"否"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdateUrl",label:"跳转地址",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.Url||"-")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"AppPreviewUrl",label:"App预览地址",align:"center",width:"135","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"a-url",attrs:{href:e.row.AppPreviewUrl,target:"_blank"}},[t._v(t._s(e.row.AppPreviewUrl))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"PushKey",label:"推送Key",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"75"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.row.AppPreviewUrl,expression:"!!scope.row.AppPreviewUrl"}],attrs:{type:"success",plain:"",size:"mini"},on:{click:function(a){t.handlePreviewApp(e.$index,e.row)}}},[t._v("预览")])]}}])})],1),t._v(" "),a("div",{staticClass:"i-pagination clearfix"},[a("div",{staticClass:"pagination-info fl"},[t._v("\n    总共"),a("span",{staticClass:"num"},[t._v(" "+t._s(t.totalRecordNum))]),t._v(" 条记录，每页 "),a("span",{staticClass:"num"},[t._v(t._s(t.perPageRecordNum))]),t._v(" 条，总页数："),a("span",{staticClass:"num"},[t._v(t._s(t.totalPage))]),t._v("，当前是第 "),a("span",{staticClass:"num"},[t._v(t._s(t.curPage))]),t._v(" 页。")]),t._v(" "),a("el-pagination",{staticClass:"fr",attrs:{background:"",layout:"prev, pager, next, jumper","current-page":1,"page-count":t.totalPage||1,"pager-count":5},on:{"current-change":t.handlePaginationPageChange}})],1)],1)},staticRenderFns:[]};var C=a("VU/8")(b,I,!1,function(t){a("Rvj5")},"data-v-78083f49",null).exports,y={name:"UserList",data:function(){var t=function(t,e,a){return function(s,i,o){console.log("value: "+i+", valName: "+e+", dataType: "+t+", required: "+a),""===i?(!a&&o(),a&&o(new Error("请输入"+e))):window.$myCommon.testValid(i,t)?o():o(new Error("请输入正确的"+e))}};return{editingInfo:{UserName:"",Password:"",Email:"",Phone:"",QQ:"",NickName:""},detailInfo:{},modifyForm:{UserName:"",Password:"",Email:"",Phone:"",QQ:"",NickName:""},curPage:1,totalPage:1,totalRecordNum:0,perPageRecordNum:10,isShowEditDialog:!1,isShowDetailDialog:!1,isCreateUser:!1,editingInfoIndex:-1,searchProps:{username:"",phone:"",email:"",group:"",status:"",isban:"",show_contact:"",show_market:""},groupList:[],groupFilter:[],isBanList:[{label:"所有",value:null},{label:"正常",value:0},{label:"禁用",value:1}],showContactList:[{label:"所有",value:null},{label:"显示",value:1},{label:"隐藏",value:0}],showMarketList:[{label:"所有",value:null},{label:"显示",value:1},{label:"隐藏",value:0}],listData:[],userRules:{Email:[{validator:t("email","邮箱",!1),trigger:"blur"}],Phone:[{validator:t("phone","手机号码",!1),trigger:"blur"}],QQ:[{validator:t("qq","QQ",!1),trigger:"blur"}]}}},watch:{$route:function(t,e){"addUser"==t.name&&this.handleEditUser(-1,{},!0)}},methods:{filterTag:function(t,e,a){return e[a.property]==t},handlePaginationPageChange:function(t){this.curPage=t,this.getUserList()},handleShowUserDetail:function(t,e){e._$index=t,this.detailInfo=f()({},e),this.isShowDetailDialog=!0},handleEditUser:function(t,e,a){this.isCreateUser=!!a,this.$refs.modifyForm&&this.$refs.modifyForm.resetFields(),a?e.GroupId=window.$store.state.GroupMaps.custom.id:this.editingInfoIndex=t,e.GroupId=parseInt(e.GroupId||0),this.editingInfo=f()({},e),this.isShowEditDialog=!0},submitEditInfo:function(){var t=this.editingInfo,e={username:t.UserName,nickname:t.NickName,pwd:t.Password,group_id:t.GroupId,email:t.Email,phone:t.Phone,qq:t.QQ,avatar:t.Avatar,isban:t.IsBan,show_contact:t.ShowContact,show_market:t.ShowMarket,remark:t.Remark};this.isCreateUser?this._addUser(e):(e.id=t.Id,this._editUser(e))},_addUser:function(t,e){var a=this;window.$cmsApi.createUser(t,function(t){e&&e(t),a.isShowEditDialog=!1,a.$message({message:"添加成功",type:"success",showClose:!0});var s=a._formatUserInfo(a.editingInfo);a.listData.unshift(s)},function(t){window.$myCommon.toast(t||"网络连接错误")})},_editUser:function(t,e){var a=this;window.$cmsApi.updateUser(t,function(t){e&&e(t),a.isShowEditDialog=!1,a.isShowDetailDialog=!1,a.$message({message:"修改成功",type:"success",showClose:!0});var s=a._formatUserInfo(a.editingInfo);a.listData.splice(a.editingInfoIndex,1,s)},function(t){window.$myCommon.toast(t||"网络连接错误")})},handleDeleteUser:function(t,e){var a=this;this.$confirm("确认删除用户 "+e.UserName+" 吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){window.$cmsApi.deleteUser(e.Id,function(){a.$message({type:"success",message:"删除成功!"}),a.listData.splice(t,1)},function(t){window.$myCommon.toast(t||"删除失败")})}).catch(function(){})},handleBanUser:function(t,e){var a=this;this.$confirm("确认禁用 "+e.UserName+" 吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){window.$cmsApi.banUser(e.Id,function(){a.$message({type:"success",message:"封号成功!"}),e.IsBan=1,e=a._formatUserInfo(e),a.listData.splice(t,1,e)},function(t){window.$myCommon.toast(t||"封号失败")})}).catch(function(t){console.log(t)})},handleUnBanUser:function(t,e){var a=this;this.$confirm("确认解除 "+e.UserName+" 的封号吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){window.$cmsApi.unBanUser(e.Id,function(){a.$message({type:"success",message:"成功解除 "+e.UserName+" 的封号！"}),e.IsBan=0,a.listData.splice(t,1,e)},function(t){window.$myCommon.toast("解封失败")})}).catch(function(){})},handlerCloseModifyPop:function(t){this.$router.push({name:"userList"}),t()},searchUserList:function(){this.getUserList()},getSearchParams:function(){var t=this.searchProps||{};return{pageSize:this.perPageRecordNum||20,page:this.curPage||1,usernme:t.username,phone:t.phone,email:t.email,group_id:"all"==t.group?"":t.group,isban:"all"==t.isban?"":t.isban,show_contact:t.show_contact,show_market:t.show_market}},getUserList:function(t){var e=this,a=this.getSearchParams();window.$cmsApi.getUserList(a,function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&t(a);var s=a.data||{},i=s.count||{};e.listData=e._formatUserList(s.list||[]),e.totalPage=i.pageCount||1,e.totalRecordNum=i.totalCount||0},function(t){window.$myCommon.toast(t||"网络连接错误")})},_formatUserInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.IsBan=void 0!==t.IsBan?t.IsBan:-2==t.Status?1:0,t.GroupName=window.$myCommon.getGroupNameByGroupId(t.GroupId),t},_formatUserList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _.each(e,function(e,a){e=t._formatUserInfo(e)}),e},exportCurPageExcel:function(){var t=this.getSearchParams();window.$cmsApi.exportUserExcel(t)},exportAllExcel:function(){window.$cmsApi.exportUserExcel({pageSize:1e3,page:1})},initGroupList:function(){var t=this,e=window.$store.state.GroupMaps;this.groupList=[{label:"所有角色",value:"all"}],this.groupFilter=[],_.each(e,function(e){t.groupList.push({label:e.name,value:e.id}),t.groupFilter.push({text:e.name,value:e.id})})}},mounted:function(){var t=this;this.mainTable=this.$refs.mainTable,window.$myCommon.checkLogin(function(e){t.getUserList(),"addUser"==t.$route.name&&t.handleEditUser(-1,{},!0),t.initGroupList()},function(){})}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-page-applist cms-p-list cms-user-list"},[a("div",{staticClass:"cms-i-nav"},[a("div",{staticClass:"nav-title el-icon-location-outline"},[t._v("用户列表")]),t._v(" "),a("div",{staticClass:"button-group fr"},[a("el-button",{attrs:{type:"success",round:"",size:"mini"},on:{click:function(e){t.handleEditUser(-1,{},!0)}}},[t._v("添加用户")]),t._v(" "),a("el-button",{attrs:{type:"warning",round:"",plain:"",size:"mini",icon:"el-icon-download\n"},on:{click:t.exportCurPageExcel}},[t._v("导出本页结果")]),t._v(" "),a("el-button",{attrs:{type:"danger",round:"",plain:"",size:"mini",icon:"el-icon-download\n"},on:{click:t.exportAllExcel}},[t._v("导出全部")])],1)]),t._v(" "),a("div",{staticClass:"search-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"账号名",clearable:"",maxlength:"50"},model:{value:t.searchProps.username,callback:function(e){t.$set(t.searchProps,"username",e)},expression:"searchProps.username"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"手机号",clearable:"",maxlength:"50"},model:{value:t.searchProps.phone,callback:function(e){t.$set(t.searchProps,"phone",e)},expression:"searchProps.phone"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"邮箱",clearable:"",maxlength:"50"},model:{value:t.searchProps.email,callback:function(e){t.$set(t.searchProps,"email",e)},expression:"searchProps.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{filterable:"",placeholder:"角色"},model:{value:t.searchProps.group,callback:function(e){t.$set(t.searchProps,"group",e)},expression:"searchProps.group"}},t._l(t.groupList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{filterable:"",placeholder:"是否禁用"},model:{value:t.searchProps.isban,callback:function(e){t.$set(t.searchProps,"isban",e)},expression:"searchProps.isban"}},t._l(t.isBanList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{filterable:"",placeholder:"显示联系方式"},model:{value:t.searchProps.show_contact,callback:function(e){t.$set(t.searchProps,"show_contact",e)},expression:"searchProps.show_contact"}},t._l(t.showContactList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{filterable:"",placeholder:"显示APP市场",width:"300px"},model:{value:t.searchProps.show_market,callback:function(e){t.$set(t.searchProps,"show_market",e)},expression:"searchProps.show_market"}},t._l(t.showMarketList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchUserList}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{ref:"mainTable",staticClass:"app-table",staticStyle:{width:"100%","text-align":"center"},attrs:{border:"",data:t.listData,align:"center","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"UserName",label:"账号名",width:"120",align:"center",sortable:"","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"t-username",on:{click:function(a){t.handleShowUserDetail(e.$index,e.row)}}},[t._v(t._s(e.row.UserName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"NickName",label:"姓名",align:"center",sortable:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"GroupId",label:"角色",align:"center",filters:t.groupFilter,"filter-method":t.filterTag},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.GroupId?a("el-tag",{attrs:{size:"mini",type:2==e.row.GroupId?"primary":1==e.row.GroupId?"danger":"success","close-transition":""}},[t._v(t._s(e.row.GroupName))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Email",label:"邮箱",align:"center",sortable:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Phone",label:"手机",align:"center",sortable:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"QQ",label:"QQ",align:"center",sortable:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"IsBan",label:"被禁用",align:"center",filters:[{text:"禁用",value:1},{text:"正常",value:0}],"filter-method":t.filterTag},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:e.row.IsBan?"danger":"success","close-transition":""}},[t._v(t._s(e.row.IsBan?"禁用":"正常"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ShowContact",label:"显示联系方式",align:"center",filters:[{text:"是",value:1},{text:"否",value:0}],"filter-method":t.filterTag},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:e.row.ShowContact?"success":"info","close-transition":""}},[t._v(t._s(e.row.ShowContact?"显示":"隐藏"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ShowMarket",label:"显示App市场",align:"center",filters:[{text:"是",value:1},{text:"否",value:0}],"filter-method":t.filterTag},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:e.row.ShowMarket?"success":"info","close-transition":""}},[t._v(t._s(e.row.ShowMarket?"显示":"隐藏"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"115",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{effect:"dark",content:"编辑"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",plain:""},on:{click:function(a){t.handleEditUser(e.$index,e.row)}}})],1),t._v(" "),e.row.IsBan?t._e():a("el-tooltip",{attrs:{effect:"dark",content:"禁用"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-remove-outline",circle:"",plain:""},on:{click:function(a){t.handleBanUser(e.$index,e.row)}}})],1),t._v(" "),e.row.IsBan?a("el-tooltip",{attrs:{effect:"dark",content:"解除封号"}},[a("el-button",{attrs:{type:"info",icon:"el-icon-check",circle:"",plain:""},on:{click:function(a){t.handleUnBanUser(e.$index,e.row)}}})],1):t._e(),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"删除"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(a){t.handleDeleteUser(e.$index,e.row)}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"i-pagination clearfix"},[a("div",{staticClass:"pagination-info fl"},[t._v("\n    总共"),a("span",{staticClass:"num"},[t._v(" "+t._s(t.totalRecordNum))]),t._v(" 条记录，每页 "),a("span",{staticClass:"num"},[t._v(t._s(t.perPageRecordNum))]),t._v(" 条，总页数："),a("span",{staticClass:"num"},[t._v(t._s(t.totalPage))]),t._v("，当前是第 "),a("span",{staticClass:"num"},[t._v(t._s(t.curPage))]),t._v(" 页。")]),t._v(" "),a("el-pagination",{staticClass:"fr",attrs:{background:"",layout:"prev, pager, next, jumper","current-page":1,"page-count":t.totalPage||1,"pager-count":5},on:{"current-change":t.handlePaginationPageChange}})],1),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:t.isCreateUser?"添加用户":"编辑用户",top:"8vh","before-close":t.handlerCloseModifyPop,visible:t.isShowEditDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowEditDialog=e}}},[a("el-form",{ref:"modifyForm",attrs:{model:t.editingInfo,"label-position":"left","label-width":"110px","auto-complete":"off",size:"mini",rules:t.userRules}},[a("el-form-item",{attrs:{label:"账号名：",required:""}},[a("el-input",{attrs:{placeholder:"请输入账号名",clearable:"",disabled:!t.isCreateUser,"auto-complete":"off"},model:{value:t.editingInfo.UserName,callback:function(e){t.$set(t.editingInfo,"UserName",e)},expression:"editingInfo.UserName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码：",required:t.isCreateUser}},[a("el-input",{attrs:{clearable:"","auto-complete":"off",placeholder:"请输入密码"},model:{value:t.editingInfo.Password,callback:function(e){t.$set(t.editingInfo,"Password",e)},expression:"editingInfo.Password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名：",required:""}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:t.editingInfo.NickName,callback:function(e){t.$set(t.editingInfo,"NickName",e)},expression:"editingInfo.NickName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"角色：",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.editingInfo.GroupId,callback:function(e){t.$set(t.editingInfo,"GroupId",e)},expression:"editingInfo.GroupId"}},t._l(t.groupList,function(e,s){return 0!=s?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()}))],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"Email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:t.editingInfo.Email,callback:function(e){t.$set(t.editingInfo,"Email",e)},expression:"editingInfo.Email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机：",prop:"Phone"}},[a("el-input",{attrs:{placeholder:"请输入手机",clearable:""},model:{value:t.editingInfo.Phone,callback:function(e){t.$set(t.editingInfo,"Phone",e)},expression:"editingInfo.Phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"QQ：",prop:"QQ"}},[a("el-input",{attrs:{placeholder:"请输入QQ",clearable:""},model:{value:t.editingInfo.QQ,callback:function(e){t.$set(t.editingInfo,"QQ",e)},expression:"editingInfo.QQ"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"被禁用："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.editingInfo.IsBan,callback:function(e){t.$set(t.editingInfo,"IsBan",e)},expression:"editingInfo.IsBan"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示联系方式："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.editingInfo.ShowContact,callback:function(e){t.$set(t.editingInfo,"ShowContact",e)},expression:"editingInfo.ShowContact"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示App市场："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.editingInfo.ShowMarket,callback:function(e){t.$set(t.editingInfo,"ShowMarket",e)},expression:"editingInfo.ShowMarket"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:t.editingInfo.Remark,callback:function(e){t.$set(t.editingInfo,"Remark",e)},expression:"editingInfo.Remark"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowEditDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitEditInfo}},[t._v("提 交")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"i-appmodify-pop",attrs:{title:"用户信息",top:"10vh",visible:t.isShowDetailDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowDetailDialog=e}}},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fr",staticStyle:{margin:"-9px 0 5px"},attrs:{type:"danger",icon:"el-icon-edit",size:"mini"},on:{click:function(e){t.handleEditUser(t.detailInfo._$index,t.detailInfo)}}},[t._v("编辑")])],1),t._v(" "),a("ul",{staticClass:"i-appmodify-list"},[a("li",[a("span",{staticClass:"i-m-tag"},[t._v("账号名：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.UserName))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("姓名：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.NickName))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("密码：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.Password))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("角色：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.GroupName))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("邮箱：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.Email))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("手机：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.Phone))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("QQ：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.QQ))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("被禁用：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(t.detailInfo.IsBan?"是":"否"))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("显示联系方式：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(1==t.detailInfo.ShowContact?"是":"否"))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("显示App市场：")]),a("span",{staticClass:"i-m-val"},[t._v(t._s(1==t.detailInfo.ShowMarket?"是":"否"))])]),t._v(" "),a("li",[a("span",{staticClass:"i-m-tag"},[t._v("创建时间：")]),a("span",{staticClass:"i-m-val"},[t._v("\n        "+t._s(t.detailInfo.CreateTime?new Date(t.detailInfo.CreateTime).toLocaleDateString():"")+"\n      ")])])])])],1)},staticRenderFns:[]};var P=a("VU/8")(y,k,!1,function(t){a("gu6C")},"data-v-d1ef2d24",null).exports,x={name:"UserCenter",data:function(){var t=this,e=function(t,e,a){return function(s,i,o){""===i?(!a&&o(),a&&o(new Error("请输入"+e))):window.$myCommon.testValid(i,t)?o():o(new Error("请输入正确的"+e))}};return{userInfoForm:{},state:$store.state,userInfo:$store.state.userInfo,tmpUserInfo:{},isEditing:!1,isShowPwdDialog:!1,pwdForm:{password:"",checkPassword:""},pwdRule:{password:[{validator:function(e,a,s){""===a?s(new Error("请输入密码")):(""!==t.pwdForm.checkPassword&&t.$refs.pwdFormEle.validateField("checkPassword"),s())},trigger:"blur"}],checkPassword:[{validator:function(e,a,s){""===a?s(new Error("请再次输入密码")):a!==t.pwdForm.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},userRules:{NickName:[{required:!0,message:"请输入姓名",trigger:"blur"}],Email:[{validator:e("email","邮箱",!1),trigger:"blur"}],Phone:[{validator:e("phone","手机号码",!1),trigger:"blur"}],QQ:[{validator:e("qq","QQ",!1),trigger:"blur"}]}}},methods:{eidtUserInfo:function(){this.isEditing=!0,this.tmpUserInfo=f()({},this.userInfo)},cancelEditUserInfo:function(){this.isEditing=!1,this.userInfo=f()({},this.tmpUserInfo),this.clearValidate()},previewUserInfo:function(){this.isEditing=!1},_saveUserInfo:function(t){var e=this;this.$refs.userInfoForm.validate(function(a){if(!a)return!1;var s=e.userInfo,i={nickname:s.NickName,group_id:s.GroupId,email:s.Email,phone:s.Phone,qq:s.QQ,avatar:s.Avatar,status:s.Status,id:e.userInfo.Id};window.$cmsApi.updateUser(i,function(a){t&&t(a),e.isEditing=!1,e.$refs.userInfoForm.clearValidate(),e.$message({message:"保存成功",type:"success",showClose:!0})},function(t){window.$myCommon.toast(t||"网络连接错误")})})},saveUserInfo:function(){this._saveUserInfo()},clearValidate:function(){this.$refs.userInfoForm.clearValidate()},_savePassword:function(t){var e=this.pwdForm.password;window.$cmsApi.modifyUserPwd(this.userInfo.Id,e,function(e){t&&t(e)},function(t){window.$myCommon.toast(t||"网络连接错误")})},savePassword:function(){var t=this;this.$refs.pwdFormEle&&this.$refs.pwdFormEle.validate(function(e){if(!e)return t.$message({message:"密码错误",type:"success",showClose:!0}),!1;t._savePassword(function(e){t.$message({message:"密码修改成功，请重新登录",type:"success",showClose:!0}),t.isShowPwdDialog=!1,window.localStorage.setItem("cms_pwd",t.pwdForm.password),window.$cmsApi.logout(),t.$router.push({name:"login"})})})},showPasswordPop:function(){this.$refs.pwdFormEle&&this.$refs.pwdFormEle.resetFields(),this.isShowPwdDialog=!0}},mounted:function(){window.$myCommon.checkLogin(function(t){},function(){})}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-page-center"},[a("div",{staticClass:"cms-i-nav"},[a("div",{staticClass:"nav-title el-icon-location-outline"},[t._v("个人信息")]),t._v(" "),a("div",{staticClass:"button-group fr"},[a("el-button",{attrs:{type:"warning",round:"",size:"mini",icon:"el-icon-edit-outline",plain:""},on:{click:t.showPasswordPop}},[t._v("修改密码")]),t._v(" "),t.isEditing?t._e():a("el-button",{attrs:{type:"danger",round:"",size:"mini",icon:"el-icon-edit"},on:{click:t.eidtUserInfo}},[t._v("编辑")])],1)]),t._v(" "),a("div",{staticClass:"userinfo",class:{isEditing:t.isEditing}},[a("el-form",{staticClass:"avatar-form",attrs:{"label-width":"80px"}},[a("el-form-item",{staticClass:"avatar-item clearfix",attrs:{label:"头像："}},[a("div",{staticClass:"avatar fl"},[t.userInfo.Avatar?t._e():a("img",{attrs:{src:"./static/images/avatar.jpg",alt:"头像"}}),t._v(" "),t.userInfo.Avatar?a("img",{attrs:{src:t.userInfo.Avatar,alt:"头像"}}):t._e()]),t._v(" "),a("el-button",{staticClass:"fl",staticStyle:{margin:"5px 0 0 20px"},attrs:{size:"mini",icon:"el-icon-upload",round:"",plain:"",disabled:""}},[t._v("更换头像")])],1)],1),t._v(" "),a("el-form",{ref:"userInfoForm",attrs:{"label-width":"80px",size:"small",model:t.userInfo,rules:t.userRules,disabled:!t.isEditing}},[a("el-form-item",{attrs:{label:"账号名："}},[a("el-input",{attrs:{disabled:t.isEditing},model:{value:t.userInfo.UserName,callback:function(e){t.$set(t.userInfo,"UserName",e)},expression:"userInfo.UserName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名：",prop:"NickName"}},[a("el-input",{model:{value:t.userInfo.NickName,callback:function(e){t.$set(t.userInfo,"NickName",e)},expression:"userInfo.NickName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"角色："}},[a("el-input",{attrs:{disabled:t.isEditing},model:{value:t.userInfo.GroupName,callback:function(e){t.$set(t.userInfo,"GroupName",e)},expression:"userInfo.GroupName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"Email"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-message"},model:{value:t.userInfo.Email,callback:function(e){t.$set(t.userInfo,"Email",e)},expression:"userInfo.Email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号：",prop:"Phone"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-phone"},model:{value:t.userInfo.Phone,callback:function(e){t.$set(t.userInfo,"Phone",e)},expression:"userInfo.Phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"QQ：",prop:"QQ"}},[a("el-input",{model:{value:t.userInfo.QQ,callback:function(e){t.$set(t.userInfo,"QQ",e)},expression:"userInfo.QQ"}})],1),t._v(" "),t.isEditing?a("el-form-item",{attrs:{align:"center"}},[a("el-button",{attrs:{round:"",size:"small"},on:{click:t.cancelEditUserInfo}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:t.saveUserInfo}},[t._v("保 存")])],1):t._e()],1)],1),t._v(" "),a("el-dialog",{staticClass:"i-pwd-pop",attrs:{title:"修改密码",top:"25vh",visible:t.isShowPwdDialog,width:"380",center:""},on:{"update:visible":function(e){t.isShowPwdDialog=e}}},[a("el-form",{ref:"pwdFormEle",attrs:{"status-icon":"",model:t.pwdForm,rules:t.pwdRule,size:"small","label-width":"70px"}},[a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.pwdForm.password,callback:function(e){t.$set(t.pwdForm,"password",e)},expression:"pwdForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.pwdForm.checkPassword,callback:function(e){t.$set(t.pwdForm,"checkPassword",e)},expression:"pwdForm.checkPassword"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"}},[a("el-button",{on:{click:function(e){t.isShowPwdDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.savePassword}},[t._v("提 交")])],1)],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(x,U,!1,function(t){a("t6SE")},"data-v-845fe2a0",null).exports,S={name:"UserCenter",data:function(){return{}},methods:{downlaodSqlBackup:function(){window.open(window.API_ROUTER.backupSql,"_blank")}},mounted:function(){window.$myCommon.checkLogin(function(t){},function(){})}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-page-settings"},[t._m(0),t._v(" "),a("div",{staticClass:"s-panel s-panel-sql"},[t._m(1),t._v(" "),a("div",{staticClass:"s-panel-con"},[t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),a("p",[t._v(" ")]),t._v(" "),a("p",[t._v("你还可以下载数据库备份到本地：")]),t._v(" "),a("p",[a("el-button",{attrs:{type:"success",icon:"el-icon-download",size:"small"},on:{click:t.downlaodSqlBackup}},[t._v("立即下载数据库备份")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cms-i-nav"},[e("div",{staticClass:"nav-title el-icon-location-outline"},[this._v("系统设置")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"s-panel-title"},[e("i",{staticClass:"el-icon-sold-out"}),this._v("一. 数据库备份")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("自动备份脚本会于每日 "),e("span",{staticClass:"num"},[this._v("凌晨三点")]),this._v(" 进行数据整体备份，")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("脚本备份位置为 "),e("span",{staticClass:"num"},[this._v("D:\\web\\app_cms\\backup_mysql")]),this._v(" 。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("为避免每日备份日志过多占满服务器存储，目前仅保留最新的 "),e("span",{staticClass:"num"},[this._v("5份")]),this._v(" 备份数据库。")])}]};var N=a("VU/8")(S,E,!1,function(t){a("MTyt")},"data-v-e9b8f0ce",null).exports,D={name:"ContactUs",data:function(){var t=function(t){return CryptoJS.AES.decrypt(t,window.$myConfig.PWD_CRYPTO_SALT).toString(CryptoJS.enc.Utf8)};return{tableData:[{linkType:"电话：",linkValue:t("U2FsdGVkX1+aAd4gtcIc77hcSbxsvWMj3gsw7v5c+XY="),isQQ:!1},{linkType:"QQ：",linkValue:t("U2FsdGVkX1+lTvYTSImJGx6EiDo0V9O+1iEBHuOkxhc="),isQQ:!0}]}},methods:{},mounted:function(){window.$myCommon.checkLogin(function(t){},function(){})}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-page-contact"},[t._m(0),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.tableData}},[a("el-table-column",{attrs:{prop:"linkType",label:"联系方式",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"linkValue",label:"号码",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"打开聊天"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.linkValue&&e.row.isQQ?a("a",{attrs:{href:"http://wpa.qq.com/msgrd?v=3&uin="+e.row.linkValue+"&site=qq&menu=yes"}},[a("el-button",{attrs:{type:"success",round:"",size:"mini"}},[t._v("打开聊天")])],1):t._e()]}}])})],1)],1),t._v(" "),a("div",{staticClass:"link-text"},[t._v("如需要购买App包，请通过以上方式联系我们。")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cms-i-nav"},[e("div",{staticClass:"nav-title el-icon-location-outline"},[this._v("联系我们")])])}]};var L=a("VU/8")(D,B,!1,function(t){a("LuKX")},"data-v-0606d28c",null).exports;s.default.use(n.a);var T,z=new n.a({routes:[{path:"/login",name:"login",component:p},{path:"/admin",name:"adminApp",component:d,children:[{path:"app/list",name:"appList",component:w},{path:"app/add",name:"addApp",component:w},{path:"app/market",name:"appMarket",component:C},{path:"app/*",redirect:"/admin/app/list"},{path:"user/list",name:"userList",component:P},{path:"user/add",name:"addUser",component:P},{path:"user/center",name:"center",component:A},{path:"user/*",redirect:"/admin/user/list"},{path:"settings",name:"settings",component:N},{path:"contact",name:"contact",component:L},{path:"/*",redirect:"/admin/app/list"}]},{path:"/*",redirect:"/login"}]}),F=a("zL8q"),R=a.n(F),M=(a("tvR6"),a("iyJi"),a("Pqsl"),a("Lxn6"),a("bOdI")),Q=a.n(M),W="http://test.dzr.com:8081/admin_api",G={login:W+"/login",logincode:W+"/logincode",logout:W+"/logout",checkLogin:W+"/checklogin",createUser:W+"/user/create",updateUser:W+"/user/update",modifyUserPwd:W+"/user/modify_pwd",getUserList:W+"/user/list",getAllDevUserList:W+"/user/all_dev",getUserDetail:W+"/user/:id",deleteUser:W+"/user/delete/:id",banUser:W+"/user/ban/:id",unBanUser:W+"/user/unban/:id",center:W+"/user/center",createApp:W+"/app/create",updateApp:W+"/app/update/:id",updateAppByIds:W+"/app/update_batch",deleteApp:W+"/app/delete/:id",getAppDetail:W+"/app/detail/:id",getAppList:W+"/app/list",getAppListOfMarket:W+"/app/list_market",publishApp:W+"/app/publish/:id",exportUserExcel:W+"/user/export",exportAppExcel:W+"/app/export",exportAppMarketExcel:W+"/app/export_market",appDataPreviewUrl:"http://test.dzr.com:8081/biz/getAppConfig?appid=",backupSql:W+"/sql/backup_latest"};window.ADMIN_API_HOST=W,window.API_ROUTER=G;var q=window.$myConfig.RES_COMMON_CODES,V=function(t,e,a,s,i,o,n){$.ajax({url:t,data:e,type:a,dataType:s||"json",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(t){if(n)return i&&i(t);var e=t.code;1==e?i&&i(t):e==q.noLogin||e==q.userNotFound||e==q.userIsBan?(window.$store.state.userInfo={},$store.app&&$store.app.$router.push({name:"login"}),o&&o(t.msg||"网络信号不好，请稍后再试")):o&&o(t.msg||"网络信号不好，请稍后再试")},error:function(){o&&o("网络信号不好，请稍后再试")}})};function j(t){var e="";for(var a in t)""!=e&&(e+="&"),e+=a+"="+encodeURIComponent(t[a]);return e}window.$cmsApi=(T={getLoginCode:function(t,e,a){V(G.logincode,t,"get","jsonp",function(t){e&&e(t.data)},a,!1)},login:function(t,e,a){V(G.login,t,"get","jsonp",function(t){e&&e(t)},a)}},Q()(T,"login",function(t,e,a){V(G.login,t,"get","jsonp",function(t){e&&e(t)},a)}),Q()(T,"logout",function(t,e){V(G.logout,{},"get","jsonp",function(e){t&&t(e)},e)}),Q()(T,"checkLogin",function(t,e){V(G.checkLogin,{},"get","jsonp",function(a){1==a.code?t&&t(a):e&&e(a.msg||"修改失败")},e)}),Q()(T,"createUser",function(t,e,a){V(G.createUser,t,"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"修改失败")},a)}),Q()(T,"updateUser",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],a=arguments[2];V(G.updateUser,t,"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"修改失败")},a)}),Q()(T,"modifyUserPwd",function(t,e,a,s){V(G.modifyUserPwd,{pwd:e,id:t},"get","jsonp",function(t){1==t.code?a&&a(t):s&&s(t.msg||"修改密码失败")},s)}),Q()(T,"getUserList",function(t,e,a){V(G.getUserList,t,"get","jsonp",function(t){1==t.code?e&&e(t):1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"getAllDevUserList",function(t,e){V(G.getAllDevUserList,{},"get","jsonp",function(e){t&&t(e)},e)}),Q()(T,"getUserDetail",function(t,e,a){V(G.getUserDetail.replace(":id",t),{},"get","jsonp",function(t){e&&e(t)},a)}),Q()(T,"deleteUser",function(t,e,a){V(G.deleteUser.replace(":id",t),{},"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"banUser",function(t,e,a){V(G.banUser.replace(":id",t),{},"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"unBanUser",function(t,e,a){V(G.unBanUser.replace(":id",t),{},"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"createApp",function(t,e,a){V(G.createApp,t,"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"updateApp",function(t,e,a){var s=t.id;console.log(t),V(G.updateApp.replace(":id",s),t,"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"updateAppByIds",function(t,e,a,s){e.ids=t,V(G.updateAppByIds,e,"get","jsonp",function(t){1==t.code?a&&a(t):s&&s(t.msg||"网络连接错误")},s)}),Q()(T,"deleteApp",function(t,e,a){V(G.deleteApp.replace(":id",t),{},"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"publishApp",function(t,e,a,s){V(G.publishApp.replace(":id",t),{isPublish:e},"get","jsonp",function(t){1==t.code?a&&a(t):s&&s(t.msg||"网络连接错误")},s)}),Q()(T,"getAppDetail",function(t,e,a){V(G.getAppDetail.replace(":id",t),{},"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"getAppList",function(t,e,a){V(G.getAppList,t,"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"getAppListOfMarket",function(t,e,a){V(G.getAppListOfMarket,t,"get","jsonp",function(t){1==t.code?e&&e(t):a&&a(t.msg||"网络连接错误")},a)}),Q()(T,"exportUserExcel",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=j(t=window.$myUtil.compact(t)),a=G.exportUserExcel+"?"+e;window.open(a,"_blank")}),Q()(T,"exportAppExcel",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=j(t=window.$myUtil.compact(t)),a=G.exportAppExcel+"?"+e;window.open(a,"_blank")}),Q()(T,"exportAppMarketExcel",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=j(t=window.$myUtil.compact(t)),a=G.exportAppMarketExcel+"?"+e;window.open(a,"_blank")}),T);a("g5qz");s.default.config.productionTip=!1,window.Vue=s.default,s.default.use(R.a),$store.app=new s.default({el:"#app",router:z,data:function(){return{state:$store.state}},components:{App:o},template:"<App/>",render:function(t){return t(o)}})},Pqsl:function(t,e){window.$myConfig={PWD_CRYPTO_SALT:'@#()&%@!_+:"Q<>?@#',RES_COMMON_CODES:{success:1,fail:-1,noLogin:-21,noPermission:-22,userNotFound:-23,userIsBan:-24}}},Rvj5:function(t,e){},g5qz:function(t,e){window.$myRegexp={qq:/^[1-9][0-9]{4,}$/,phone:/^(0|86|17951)?(13[0-9]|15[012356789]|18[0-9]|14[57]|17[678])[0-9]{8}$/,email:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,url:/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/},window.$myCommon={toast:function(t,e){$store.app&&$store.app.$message({showClose:!0,message:t,type:e||"error"})},alert:function(t){this.$confirm(t,"",{confirmButtonText:"确定",type:"danger",center:!0})},getGroupNameByGroupId:function(t){if(!t||isNaN(t))return"";t=parseInt(t);var e=window.$store.state.GroupMaps;return(_.find(e,{id:t})||{}).name||""},checkLogin:function(t,e,a){window.$cmsApi.checkLogin(function(s){if(1==s.code){var i=s.data||{},o=window.$store.state.GroupMaps,n=s.data||{};n.GroupName=window.$myCommon.getGroupNameByGroupId(n.GroupId),window.$store.state.userInfo=n,window.$store.state.isCustom=i.GroupName==o.custom.name,window.$store.state.isDevelop=i.GroupName==o.develop.name;var l=i.GroupName==o.manager.name;window.$store.state.isManager=l,window.$store.state.showContact=!!n.ShowContact,window.$store.state.showMarket=!!n.ShowMarket,t&&t(s),a&&$store.app&&$store.app.$router.push({name:"appList"})}else e&&e(),$store.app&&$store.app.$router.push({name:"login"})},function(){e&&e(),$store.app&&$store.app.$router.push({name:"login"})})},testValid:function(t,e){var a=window.$myRegexp[e];return a&&a.test(t)},getCustNameById:function(t){if(!t)return"";var e=window.$store.state.custUserList||[];t=parseInt(t);var a=_.find(e,{Id:t})||{};return a.NickName||a.UserName||a.Id||""}}},gu6C:function(t,e){},iyJi:function(t,e){window.$store={state:{userInfo:{UserName:"",NickName:"",GroupName:"",Email:"",Phone:"",QQ:"",GroupId:""},devUserList:[],custUserList:[],allUserList:[],GroupMaps:{custom:{id:3,name:"客户"},develop:{id:2,name:"开发"},manager:{id:1,name:"管理员"}},isCustom:!1,isDevelop:!1,isManager:!1,showContact:!1,showMarket:!1}}},s8Av:function(t,e){},t6SE:function(t,e){},tvR6:function(t,e){},z2mf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b55a368e3a76bc84dcb6.js.map